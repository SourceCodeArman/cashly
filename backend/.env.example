# =============================================================================
# Cashly Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control - it contains sensitive information
#
# Usage: cp .env.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# Django Core Settings
# -----------------------------------------------------------------------------
# Django secret key - Generate a new one for production!
# You can generate one with: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=django-insecure-change-this-in-production

# Debug mode - Set to False in production
DEBUG=True

# Comma-separated list of allowed hostnames (e.g., "localhost,127.0.0.1,yourdomain.com")
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_NAME=cashly_dev
DB_USER=cashly_user
DB_PASSWORD=your-database-password-here
DB_HOST=localhost
DB_PORT=5432

# -----------------------------------------------------------------------------
# Plaid API Configuration
# -----------------------------------------------------------------------------
# Get these from https://dashboard.plaid.com/
# PLAID_ENV can be: sandbox, development, or production
PLAID_CLIENT_ID=your-plaid-client-id
PLAID_SECRET=your-plaid-secret-key
PLAID_ENV=sandbox

# Encryption key for storing Plaid access tokens securely
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# IMPORTANT: This must be a URL-safe base64-encoded 32-byte key
PLAID_ENCRYPTION_KEY=your-plaid-encryption-key-here

# -----------------------------------------------------------------------------
# Celery & Redis Configuration
# -----------------------------------------------------------------------------
# Redis connection URL for Celery task queue
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Development only: Run Celery tasks synchronously (no worker needed)
# Set to True for easier debugging, False to use actual Celery workers
CELERY_TASK_ALWAYS_EAGER=False

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed frontend origins
# Default allows localhost:3000 and localhost:3001 (common React dev ports)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
# Base URL of your frontend application (used for password reset links, etc.)
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# AI Categorization Configuration
# -----------------------------------------------------------------------------
# Enable/disable AI-powered transaction categorization
AI_CATEGORIZATION_ENABLED=True

# Automatically categorize transactions during sync from Plaid
AI_AUTO_CATEGORIZE_ON_SYNC=True

# AI Provider: ollama (local), openai, anthropic (future)
AI_PROVIDER=ollama

# Ollama Configuration (for local AI testing)
# Make sure Ollama is running: ollama serve
# Pull the model: ollama pull llama3.1:8b
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1:8b

# -----------------------------------------------------------------------------
# Production Email Configuration (Optional - for production only)
# -----------------------------------------------------------------------------
# Uncomment and configure these when deploying to production
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=apikey
# EMAIL_HOST_PASSWORD=your-sendgrid-api-key
# DEFAULT_FROM_EMAIL=noreply@cashly.com

# =============================================================================
# Notes:
# =============================================================================
# - All string values should NOT be quoted (e.g., SECRET_KEY=value, not SECRET_KEY="value")
# - Boolean values should be: True or False (capitalized)
# - Comma-separated lists should have no spaces after commas (or spaces will be trimmed)
# - For Docker Compose: Some values are overridden in docker-compose.yml
# =============================================================================

# -----------------------------------------------------------------------------
# Stripe API Configuration
# -----------------------------------------------------------------------------
# Get these from https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_..., pk_test_...) for development
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key-here
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key-here

# Webhook signing secret (get from Stripe Dashboard > Developers > Webhooks)
# After creating a webhook endpoint, Stripe will provide the signing secret
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-signing-secret-here

# Stripe API Version (optional, defaults to latest)
STRIPE_API_VERSION=2024-12-18.acacia

# Stripe Price IDs (set after running: python manage.py create_stripe_products)
# Run the management command to create products/prices in Stripe, then copy the output Price IDs here
STRIPE_PREMIUM_MONTHLY_PRICE_ID=price_...
STRIPE_PREMIUM_ANNUAL_PRICE_ID=price_...
STRIPE_PRO_MONTHLY_PRICE_ID=price_...
STRIPE_PRO_ANNUAL_PRICE_ID=price_...
